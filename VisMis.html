<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="img/a2.png">
    <title>Vision & Mission - Zamboanga Sibugay National High School</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>

    <style>
        /* =========================================
           YOUR PROVIDED CSS DESIGN
           ========================================= */
        :root {
            --primary: #a40028;
            --secondary: #8B0000;
            --accent: #FFD700;
            --light: #F8F9FA;
            --dark: #212529;
            --primary-color: #a40028;
            --secondary-color: #FFD700;
            --accent-color: #0056b3;
            --text-color: #333;
            --light-gray: #f8f9fa;
            --white: #ffffff;
            --dark-gray: #a40028;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }

        body { background-color: var(--light-gray); color: var(--text-color); line-height: 1.8; display: flex; flex-direction: column; min-height: 100vh; }

        /* Header Styles */
        .top-bar { background: var(--primary); color: white; padding: 10px 30px; font-size: 0.9em; display: flex; justify-content: center; align-items: center; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1); gap: 40px; }
        .top-bar i { margin-right: 8px; color: var(--accent); }

        .logo-bar { display: flex; justify-content: space-between; align-items: center; background-color: white; padding: 20px 30px; min-height: 200px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); position: relative; gap: 40px; }
        .logo-bar::before { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent)); }
        
        .logo-container { display: flex; align-items: center; width: 25%; gap: 20px; }
        .left-logo { justify-content: flex-end; padding-right: 30px; }
        .right-logo { justify-content: flex-start; padding-left: 30px; }
        .zsnhs-logo, .deped-logo { height: 150px; width: auto; object-fit: contain; max-width: 220px; }
        
        .title-container { display: flex; align-items: center; justify-content: center; flex: 1; padding: 0 20px; }
        .school-name { text-align: center; }
        .school-name h1 { color: var(--primary); font-size: 2.5em; margin: 0; font-weight: 800; line-height: 1.2; text-transform: uppercase; }
        .school-name p { color: var(--secondary); font-size: 1.1em; font-weight: 600; font-style: italic; margin-top: 8px; }

        /* Navigation Styles */
        nav { background: linear-gradient(135deg, var(--primary), #002244); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15); }
        .nav-links { display: flex; list-style: none; justify-content: center; padding: 0 30px; margin: 0; }
        .nav-links>li { position: relative; }
        .nav-links>li:hover .dropdown-menu { display: block; }
        .nav-links a { color: white; text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 0.85em; letter-spacing: 1px; padding: 18px 22px; display: block; transition: all 0.3s ease; }
        .nav-links a:hover { color: var(--accent); }
        
        .dropdown-menu { display: none; position: absolute; top: 100%; left: 0; background-color: white; min-width: 200px; box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); z-index: 1; border-radius: 0 0 4px 4px; overflow: hidden; }
        .dropdown-menu li { border-bottom: 1px solid #f0f0f0; }
        .dropdown-menu li:last-child { border-bottom: none; }
        .dropdown-menu a { color: var(--dark); padding: 12px 20px; text-transform: none; }
        .dropdown-menu a:hover { background-color: var(--primary); color: white; }

        /* Main Content Styles */
        main { flex: 1; }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 20px; }
        
        .hero-banner { 
            background-color: #002244;
            /* Update this path to a real image in your project folder if you have one */
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('img/banner.jpg'); 
            background-size: cover; background-position: center; height: 60vh; min-height: 400px; display: flex; align-items: center; justify-content: center; text-align: center; color: var(--white); margin-bottom: 60px; position: relative; 
        }
        
        .hero-content { max-width: 800px; padding: 0 20px; }
        .hero-title { font-size: 3.2rem; font-weight: 700; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 2px; text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3); }
        .hero-subtitle { font-size: 1.4rem; margin-bottom: 30px; font-weight: 300; }

        .section { margin-bottom: 80px; background-color: var(--white); border-radius: 10px; padding: 50px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); position: relative; overflow: hidden; }
        .section::before { content: ''; position: absolute; top: 0; left: 0; width: 5px; height: 100%; background: linear-gradient(to bottom, var(--primary-color), var(--secondary-color)); }
        
        .section-title { color: var(--primary-color); font-size: 2.5rem; margin-bottom: 2rem; position: relative; padding-bottom: 15px; font-weight: 700; }
        .section-title::after { content: ''; position: absolute; bottom: 0; left: 0; width: 80px; height: 4px; background-color: var(--secondary-color); border-radius: 2px; }
        
        .section-subtitle { font-size: 1.3rem; font-weight: 600; color: var(--primary-color); margin-bottom: 1.5rem; line-height: 1.4; }
        .section-text { font-size: 1.1rem; margin-bottom: 1.8rem; color: var(--dark-gray); } 
        
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 50px; align-items: center; }
        
        /* Image Styling */
        .section-image { width: 100%; height: 350px; object-fit: cover; border-radius: 8px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1); transition: transform 0.5s ease; background-color: #ddd; cursor: pointer; }
        .section-image:hover { transform: scale(1.02); }

        .core-values { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 30px; margin-top: 40px; }
        .value-item { background-color: var(--white); padding: 30px; border-radius: 8px; transition: all 0.4s ease; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); border-top: 4px solid var(--primary-color); position: relative; overflow: hidden; }
        .value-item::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background-color: var(--secondary-color); transform: scaleX(0); transform-origin: left; transition: transform 0.4s ease; }
        .value-item:hover { transform: translateY(-10px); box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1); }
        .value-item:hover::after { transform: scaleX(1); }
        
        .value-image { width: 100%; height: 180px; object-fit: contain; border-radius: 6px; margin-bottom: 20px; transition: transform 0.4s ease; cursor: pointer;}
        .value-item:hover .value-image { transform: scale(1.05); }
        .value-title { color: var(--primary-color); font-size: 1.4rem; margin-bottom: 15px; font-weight: 600; text-align: center; }
        .value-text { color: var(--dark-gray); font-size: 1rem; text-align: center;}

        .divider { border: 0; height: 1px; background: linear-gradient(to right, transparent, var(--primary-color), transparent); margin: 60px auto; max-width: 80%; }

        /* Footer Styles */
        footer { background: linear-gradient(135deg, var(--primary), #a40028); color: white; padding: 50px 30px 20px; }
        .footer-container { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 30px; max-width: 1200px; margin: 0 auto; }
        .footer-section h3 { color: var(--accent); font-size: 1.3em; margin-bottom: 20px; position: relative; padding-bottom: 10px; }
        .footer-section h3::after { content: ''; position: absolute; bottom: 0; left: 0; width: 50px; height: 2px; background: var(--primary); }
        .footer-section p { line-height: 1.6; margin-bottom: 15px; }
        .social-links { display: flex; gap: 15px; margin-top: 20px; }
        .social-links a { color: white; font-size: 1.2em; transition: color 0.3s; }
        .social-links a:hover { color: var(--accent); }
        .contact-info { list-style: none; }
        .contact-info li { margin-bottom: 15px; display: flex; align-items: flex-start; }
        .contact-info i { margin-right: 10px; color: var(--accent); margin-top: 4px; }
        .copyright { text-align: center; margin-top: 50px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.1); font-size: 0.9em; }

        /* =========================================
           NEW LIGHTBOX (MODAL) STYLES
           ========================================= */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 9999; /* Sit on top */
            padding-top: 60px; /* Location of the box */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.9); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            margin: auto;
            display: block;
            width: auto;
            max-width: 90%;
            max-height: 90vh;
            border-radius: 5px;
            box-shadow: 0 0 20px rgba(255,255,255,0.1);
            animation-name: zoom;
            animation-duration: 0.4s;
        }

        @keyframes zoom {
            from {transform:scale(0)} 
            to {transform:scale(1)}
        }

        .close {
            position: absolute;
            top: 25px;
            right: 35px;
            color: #f1f1f1;
            font-size: 45px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            z-index: 10000;
        }

        .close:hover,
        .close:focus {
            color: var(--secondary-color);
            text-decoration: none;
            cursor: pointer;
        }

        /* Responsive */
        @media (max-width: 992px) { .hero-title { font-size: 2.8rem; } .section { padding: 40px; } }
        @media (max-width: 768px) {
            .top-bar { flex-direction: column; gap: 8px; padding: 12px 15px; text-align: center; }
            .logo-bar { flex-direction: column; gap: 20px; min-height: auto;}
            .logo-container { width: 100%; justify-content: center; padding: 0; }
            .school-name h1 { font-size: 1.8em; }
            .nav-links { flex-direction: column; padding: 0; }
            .nav-links>li { width: 100%; text-align: center; }
            .dropdown-menu { position: static; width: 100%; box-shadow: none; border-radius: 0; }
            .hero-title { font-size: 2.4rem; }
            .hero-subtitle { font-size: 1.2rem; }
            .two-column { grid-template-columns: 1fr; }
            .section-image { height: 280px; order: -1; }
            .section { padding: 30px; }
            .section-title { font-size: 2.2rem; }
            .footer-container { grid-template-columns: 1fr; }
            .modal-content { width: 100%; }
        }
        @media (max-width: 576px) { .hero-title { font-size: 2rem; } .section-title { font-size: 1.8rem; } .section-image, .value-image { height: 220px; } }
        
        /* Functional States */
        .loading-text { opacity: 0.5; font-style: italic; }
    </style>
</head>

<body>
    <header>
        <div class="top-bar">
            <div>
                <i class="fas fa-map-marker-alt"></i> Provincial Government Complex, Ipil, Zamboanga Sibugay
                <i class="fas fa-phone"></i> (062) 991-1771
                <i class="fas fa-envelope"></i> zsnhs@deped.gov.ph
            </div>
        </div>

        <div class="logo-bar">
            <div class="logo-container left-logo">
                <img src="img/zsnhs_logo.jpg" alt="ZSNHS Logo" class="zsnhs-logo">
            </div>
            <div class="title-container">
                <div class="school-name">
                    <h1>ZAMBOANGA SIBUGAY NATIONAL HIGH SCHOOL</h1>
                </div>
            </div>
            <div class="logo-container right-logo">
                <img src="img/deped_logo.jfif" alt="DepEd Logo" class="deped-logo">
            </div>
        </div>

        <nav>
            <ul class="nav-links">
                <li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
                <li>
                    <a href="#"><i class="fas fa-info-circle"></i> About Us <i class="fas fa-caret-down"></i></a>
                    <ul class="dropdown-menu">
                        <li><a href="VisMis.html"><i class="fas fa-bullseye"></i> Mission & Vision</a></li>
                        <li><a href="history.html"><i class="fas fa-landmark"></i> History</a></li>
                    </ul>
                </li>
                <li>
                    <a href="#"><i class="fas fa-info-circle"></i> Tracks <i class="fas fa-caret-down"></i></a>
                    <ul class="dropdown-menu">
                        <li><a href="tvl.html"><i class="fas fa-bullseye"></i> TVL Tracks </a></li>
                        <li><a href="academic.html"><i class="fas fa-landmark"></i> Academic Tracks </a></li>
                    </ul>
                </li>
                <li><a href="contact.html"><i class="fas fa-graduation-cap"></i> Contact</a></li>
                <li><a href="Login.html"><i class="fas fa-user-shield"></i> MyACCOUNT</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="hero-banner">
            <div class="hero-content">
                <h1 class="hero-title">Vision & Mission</h1>
                <p class="hero-subtitle">Guiding Principles for Excellence in Education</p>
            </div>
        </div>

        <div class="container">
            <section class="section" id="vision">
                <h2 class="section-title">Our Vision</h2>
                <div class="two-column">
                    <div>
                        <p class="section-text" id="vision-text"><span class="loading-text">Loading vision statement...</span></p>
                    </div>
                    <img id="vision-img" src="" 
                        alt="Vision" 
                        class="section-image" 
                        onclick="openModal(this.src)"
                        onerror="this.src='https://placehold.co/600x400/a40028/FFD700?text=Vision+Image'">
                </div>
            </section>

            <div class="divider"></div>

            <section class="section" id="mission">
                <h2 class="section-title">Our Mission</h2>
                <div class="two-column">
                    <img id="mission-img" src="" 
                        alt="Mission" 
                        class="section-image" 
                        onclick="openModal(this.src)"
                        onerror="this.src='https://placehold.co/600x400/a40028/FFD700?text=Mission+Image'">
                    <div>
                        <p class="section-text" id="mission-text"><span class="loading-text">Loading mission statement...</span></p>
                    </div>
                </div>
            </section>

            <div class="divider"></div>

            <section class="section" id="core-values">
                <h2 class="section-title" style="text-align: center;">Our Core Values</h2>
                
                <img id="core-img" src="" alt="Core Values Banner" class="section-image" 
                     style="margin-bottom: 40px; width: 100%; height: 300px; object-fit: cover;" 
                     onclick="openModal(this.src)"
                     onerror="this.src='https://placehold.co/1200x400/a40028/FFD700?text=Core+Values'">

                <div class="core-values" id="core-values-container">
                    <p class="loading-text" style="text-align:center; grid-column: 1/-1;">Loading core values...</p>
                </div>
            </section>
        </div>
    </main>

    <div id="imageModal" class="modal" onclick="closeModal()">
        <span class="close" onclick="closeModal()">&times;</span>
        <img class="modal-content" id="fullImage">
    </div>

    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>About ZSNHS</h3>
                <p>Zamboanga Sibugay National High School is committed to providing quality education to the youth of Sibugay Province.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="footer-section">
                <h3>Contact Us</h3>
                <ul class="contact-info">
                    <li><i class="fas fa-map-marker-alt"></i>Provincial Government Complex, Ipil</li>
                    <li><i class="fas fa-phone-alt"></i>(062) 991-1771</li>
                    <li><i class="fas fa-envelope"></i>zsnhs@deped.gov.ph</li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2025 Zamboanga Sibugay National High School. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // --- 1. CONFIGURATION ---
        const firebaseConfig = {
            apiKey: "AIzaSyDlClfbOSKAhalafAQ4ptMRCHkaG-DxDd8",
            authDomain: "zsnhs-24e44.firebaseapp.com",
            databaseURL: "https://zsnhs-24e44-default-rtdb.firebaseio.com",
            projectId: "zsnhs-24e44",
            storageBucket: "zsnhs-24e44.firebasestorage.app",
            messagingSenderId: "39166648924",
            appId: "1:39166648924:web:d65f2e83e6143a5aff7c99",
            measurementId: "G-C9JMD4C5WB"
        };

        const supabaseUrl = "https://lydfpvyzlkiemdkfevld.supabase.co";

        // Initialize SDKs
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // --- 2. DATA STRUCTURE FOR 'VISION' COLLECTION (With Placeholders) ---
        const defaultData = {
            mission_vision: {
                vision: "Zamboanga Sibugay National High School is an educational institution developing and turning out value-oriented, critical-minded, nationalistic, environment friendly young leaders who are contributors to the development of the community.",
                mission: "To provide unlimited access to quality and relevant education for the young leaders' total intellectual, moral, social, spiritual and environmental awareness through a curriculum implemented by competent and child-friendly teachers, staff and administration.",
                // Supabase Image URLs (Make sure these files exist in your bucket!)
                vision_image: `${supabaseUrl}/storage/v1/object/public/vision-mission-images/V.webp`,
                mission_image: `${supabaseUrl}/storage/v1/object/public/vision-mission-images/OIP.webp`,
                core_main_image: `${supabaseUrl}/storage/v1/object/public/vision-mission-images/core.jpg`
            },
            core_values: [
                {
                    title: "EQUALITY",
                    description: "The school is expected to be fair in dealing with the school stakeholders.",
                    image_url: `${supabaseUrl}/storage/v1/object/public/vision-mission-images/core-values/equality.png`,
                    order: 1
                },
                {
                    title: "ACCOUNTABILITY",
                    description: "The school is expected to be answerable to the decisions it would make for the interest of the stakeholders especially the students.",
                    image_url: `${supabaseUrl}/storage/v1/object/public/vision-mission-images/core-values/accountability.png`,
                    order: 2
                },
                {
                    title: "COMPETENCE",
                    description: "The school is expected to provide competent faculty and staff to produce competent graduates.",
                    image_url: `${supabaseUrl}/storage/v1/object/public/vision-mission-images/core-values/competence.png`,
                    order: 3
                }
            ]
        };

        // --- 3. LOGIC ---
        document.addEventListener('DOMContentLoaded', function() {
            init();
        });

        async function init() {
            console.log("Initializing...");
            await seedDatabase(); // Create data if missing
            await loadData();     // Fetch and display
        }

        async function seedDatabase() {
            try {
                // Target: Collection 'vision', Document 'schoolData'
                const docRef = db.collection('vision').doc('schoolData');
                const doc = await docRef.get();

                if (!doc.exists) {
                    console.log("Creating 'vision' collection data...");
                    await docRef.set(defaultData);
                    console.log("Data stored in 'vision/schoolData' successfully.");
                }
            } catch (error) {
                console.error("Error writing to Firestore:", error);
            }
        }

        async function loadData() {
            try {
                const doc = await db.collection('vision').doc('schoolData').get();
                if (doc.exists) {
                    const data = doc.data();
                    displayData(data);
                } else {
                    displayData(defaultData); // Fallback
                }
            } catch (error) {
                console.error("Error reading Firestore:", error);
                displayData(defaultData);
            }
        }

        function displayData(data) {
            // Mission & Vision
            const mv = data.mission_vision || defaultData.mission_vision;
            
            const visionText = document.getElementById('vision-text');
            const missionText = document.getElementById('mission-text');
            
            // Update text and remove opacity style to fade in naturally
            if(visionText) visionText.textContent = mv.vision;
            if(missionText) missionText.textContent = mv.mission;
            
            // Update images
            const vImg = document.getElementById('vision-img');
            const mImg = document.getElementById('mission-img');
            const cImg = document.getElementById('core-img');

            if(vImg) vImg.src = mv.vision_image;
            if(mImg) mImg.src = mv.mission_image;
            if(cImg) cImg.src = mv.core_main_image;

            // Core Values
            const cv = data.core_values || defaultData.core_values;
            const container = document.getElementById('core-values-container');
            
            if(container) {
                let html = '';
                // Sort by 'order'
                cv.sort((a,b) => a.order - b.order).forEach(val => {
                    html += `
                        <div class="value-item">
                            <img src="${val.image_url}" class="value-image" alt="${val.title}" 
                                 onclick="openModal(this.src)"
                                 onerror="this.src='https://placehold.co/200x200/a40028/FFD700?text=${val.title.charAt(0)}'">
                            <h3 class="value-title">${val.title}</h3>
                            <p class="value-text">${val.description}</p>
                        </div>
                    `;
                });
                container.innerHTML = html;
            }
        }

        // --- 4. NEW MODAL FUNCTIONS ---
        function openModal(src) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('fullImage');
            
            modal.classList.add('show'); // Show the modal
            modalImg.src = src; // Set the image source
        }

        function closeModal() {
            const modal = document.getElementById('imageModal');
            modal.classList.remove('show'); // Hide the modal
        }
    </script>
</body>
</html>