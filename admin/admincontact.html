<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADMIN - ZSNHS Contact Management</title>
    <link rel="icon" type="image/x-icon" href="../img/a2.png">
    <style>
    /* =========================================
       ORIGINAL STYLES (Preserved)
       ========================================= */
    :root {
        --primary: #a40028;
        --secondary: #8B0000;
        --accent: #FFD700;
        --light: #F8F9FA;
        --dark: #212529;
        --transition: all 0.3s ease;
        --admin-color: #2ecc71; /* Green for Admin UI */
        --delete-color: #e74c3c; /* Red for Delete */
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: var(--dark);
        background-color: #f5f5f5;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    /* Header Styles */
    .top-bar { background: var(--primary); color: white; padding: 10px 30px; font-size: 0.9em; display: flex; justify-content: center; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .top-bar i { margin-right: 8px; color: var(--accent); }
    .logo-bar { display: flex; justify-content: space-between; align-items: center; background-color: white; padding: 20px 30px; min-height: 200px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); position: relative; }
    .logo-bar::before { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 4px; background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent)); }
    .logo-container { display: flex; align-items: center; width: 25%; }
    .left-logo { justify-content: flex-end; padding-right: 30px; }
    .right-logo { justify-content: flex-start; padding-left: 30px; }
    .zsnhs-logo, .deped-logo { height: 150px; width: auto; object-fit: contain; max-width: 220px; transition: var(--transition); }
    .title-container { display: flex; align-items: center; justify-content: center; flex: 1; padding: 0 20px; }
    .school-name { text-align: center; }
    .school-name h1 { color: var(--primary); font-size: 2.5em; margin: 0; font-weight: 800; line-height: 1.2; text-transform: uppercase; transition: var(--transition); }
    .school-name p { color: var(--secondary); font-size: 1.1em; font-weight: 600; font-style: italic; margin-top: 8px; }

    /* Navigation */
    nav { background: linear-gradient(135deg, var(--primary), #002244); position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 12px rgba(0,0,0,0.15); padding: 0 20px; }
    
    .nav-container {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
    }

    .nav-links { display: flex; list-style: none; justify-content: center; padding: 0; margin: 0; }
    .nav-links > li { position: relative; }
    
    /* Desktop Hover Logic */
    .nav-links > li:hover .dropdown-menu { display: block; opacity: 1; visibility: visible; }
    
    .nav-links a { color: white; text-decoration: none; font-weight: 600; text-transform: uppercase; font-size: 0.85em; letter-spacing: 1px; padding: 18px 22px; display: block; transition: var(--transition); white-space: nowrap;}
    .nav-links a:hover { color: var(--accent); }

    .dropdown-menu { 
        display: none; /* Hidden by default */
        position: absolute; 
        top: 100%; 
        left: 0; 
        background-color: white; 
        min-width: 200px; 
        box-shadow: 0 8px 16px rgba(0,0,0,0.2); 
        z-index: 9999; 
        border-radius: 0 0 4px 4px; 
        overflow: hidden; 
    }
    
    .dropdown-menu li { border-bottom: 1px solid #f0f0f0; }
    .dropdown-menu li:last-child { border-bottom: none; }
    .dropdown-menu a { color: var(--dark); padding: 12px 20px; text-transform: none; display: block; }
    .dropdown-menu a:hover { background-color: var(--primary); color: white; }

    /* Mobile Menu Toggle Button (Hidden on Desktop) */
    .mobile-menu-toggle { display: none; background: none; border: none; color: white; font-size: 1.5em; cursor: pointer; padding: 15px; position: absolute; right: 20px; top: 0; }

    /* Main Content */
    main { flex: 1; }
    .main-content { padding: 40px; max-width: 1200px; margin: 30px auto; background: white; box-shadow: 0 5px 15px rgba(0,0,0,0.1); position: relative; transition: var(--transition); }
    .decorative-corner { position: absolute; width: 150px; height: 150px; background: linear-gradient(45deg, var(--primary), transparent); top: 0; right: 0; clip-path: polygon(0 0, 100% 100%, 100% 0); opacity: 0.1; }
    .contact-section { margin-bottom: 50px; animation: fadeIn 0.6s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .main-content h1 { color: var(--primary); font-size: 2.8em; margin-bottom: 25px; position: relative; padding-bottom: 15px; }
    .main-content h1::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100px; height: 4px; background: var(--accent); border-radius: 2px; }
    .main-content h2 { color: var(--secondary); font-size: 2em; margin-top: 40px; margin-bottom: 20px; position: relative; padding-left: 20px; }
    .main-content h2::before { content: ''; position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 8px; height: 30px; background: var(--primary); border-radius: 4px; }
    
    .office-info { margin-top: 30px; background-color: var(--light); padding: 25px; border-radius: 8px; border-left: 4px solid var(--accent); box-shadow: 0 5px 15px rgba(0,0,0,0.05); position: relative;}
    .office { margin-bottom: 30px; padding: 20px; background-color: white; border-radius: 8px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); border-top: 3px solid var(--primary); position: relative; transition: var(--transition); }
    .office:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
    .office h3 { color: var(--primary); margin-bottom: 15px; font-size: 1.4em; font-weight: 700; display: flex; align-items: center; }
    .office h3 i { margin-right: 10px; color: var(--secondary); }
    .contact-method { margin-bottom: 12px; display: flex; align-items: flex-start; font-size: 1.05em; }
    .contact-method i { width: 25px; color: var(--primary); margin-right: 10px; text-align: center; margin-top: 2px; }

    /* Footer */
    footer { background: linear-gradient(135deg, var(--primary), #a40028); color: white; padding: 40px 30px; text-align: center; }
    .footer-container { max-width: 1200px; margin: 0 auto; }
    .academic-programs { margin-bottom: 40px; text-align: left; }
    .academic-programs h2 { color: var(--accent); font-size: 1.8em; margin-bottom: 20px; text-align: center; }
    .programs-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
    .program-card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 8px; transition: var(--transition); text-align: center; position: relative;}
    .program-card:hover { transform: translateY(-5px); background: rgba(255,255,255,0.15); }
    .program-card h3 { color: var(--accent); margin-bottom: 10px; }
    .copyright { margin-top: 30px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px; font-size: 0.9em; }

    /* Responsive */
    @media (max-width: 991px) {
        .zsnhs-logo, .deped-logo { height: 120px; }
        .logo-bar { min-height: 180px; }
    }
    @media (max-width: 767px) {
        .logo-bar { flex-direction: column; min-height: auto; }
        .logo-container { width: 100%; justify-content: center; padding: 0 !important; }
        
        /* Mobile Navigation Fixes */
        .mobile-menu-toggle { display: block; } /* Show Hamburger */
        .nav-container { justify-content: flex-start; }
        .nav-links { 
            display: none; 
            flex-direction: column; 
            width: 100%; 
            position: absolute;
            top: 100%;
            left: 0;
            background: linear-gradient(135deg, var(--primary), #002244);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .nav-links.active { display: flex; } /* JavaScript toggles this */
        
        .nav-links > li { width: 100%; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .dropdown-menu { 
            position: static; 
            width: 100%; 
            box-shadow: none; 
            background-color: rgba(0,0,0,0.1); 
        }
        /* On mobile, we use JS to toggle class 'open' instead of hover */
        .nav-links > li:hover .dropdown-menu { display: none; } 
        .nav-links > li.dropdown-active .dropdown-menu { display: block; }
        .dropdown-menu a { color: white; padding-left: 40px; text-align: left; }
        
        .programs-grid { grid-template-columns: 1fr; }
    }

    /* =========================================
       ADMIN UI STYLES
       ========================================= */
    .admin-bar {
        background-color: #333;
        color: white;
        padding: 10px;
        text-align: center;
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        z-index: 9999;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 30px;
    }

    .admin-badge {
        background-color: var(--admin-color);
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-weight: bold;
        font-size: 0.8em;
        margin-left: 10px;
    }

    /* Admin Action Buttons (Edit/Delete) */
    .admin-actions {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        gap: 5px;
        z-index: 10;
        background: rgba(255, 255, 255, 0.9);
        padding: 5px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    .btn-edit, .btn-delete, .btn-add, .btn-save, .btn-cancel {
        border: none;
        cursor: pointer;
        padding: 8px 12px;
        border-radius: 4px;
        font-weight: 600;
        font-size: 0.9em;
        transition: 0.2s;
    }

    .btn-edit { background-color: var(--admin-color); color: white; }
    .btn-edit:hover { background-color: #27ae60; }

    .btn-delete { background-color: var(--delete-color); color: white; }
    .btn-delete:hover { background-color: #c0392b; }

    .btn-add {
        background-color: var(--primary);
        color: white;
        margin: 20px auto;
        display: block;
        width: 200px;
    }

    /* Modal Styles */
    .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 10000;
    }

    .modal-content {
        background: white;
        padding: 30px;
        border-radius: 8px;
        width: 90%;
        max-width: 500px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        max-height: 90vh;
        overflow-y: auto;
    }

    .modal-header {
        border-bottom: 1px solid #eee;
        padding-bottom: 15px;
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .form-group { margin-bottom: 15px; }
    .form-group label { display: block; margin-bottom: 5px; font-weight: 600; font-size: 0.9em; }
    .form-group input, .form-group textarea, .form-group select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-family: inherit;
    }
    .form-group textarea { height: 100px; resize: vertical; }

    .modal-footer {
        border-top: 1px solid #eee;
        padding-top: 20px;
        margin-top: 20px;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }

    .btn-save { background-color: var(--primary); color: white; }
    .btn-cancel { background-color: #95a5a6; color: white; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body>

    <header>
        <div class="top-bar">
            <div id="school-info">
                <i class="fas fa-map-marker-alt"></i> <span id="school-address">...</span>
                <i class="fas fa-phone"></i> <span id="school-phone">...</span>
                <i class="fas fa-envelope"></i> <span id="school-email">...</span>
            </div>
        </div>
        
        <div class="logo-bar">
            <div class="logo-container left-logo">
                <img src="../img/zsnhs_logo.jpg" alt="ZSNHS Logo" class="zsnhs-logo">
            </div>
            <div class="title-container">
                <div class="school-name">
                    <h1 id="school-name">ZAMBOANGA SIBUGAY NATIONAL HIGH SCHOOL</h1>
                    <p>Contact Page Administrator</p>
                </div>
            </div>
            <div class="logo-container right-logo">
                <img src="../img/deped_logo.jfif" alt="DepEd Logo" class="deped-logo">
            </div>
        </div>
        
        <nav>
            <div class="nav-container">
                <button class="mobile-menu-toggle">
                    <i class="fas fa-bars"></i>
                </button>
                <ul class="nav-links">
                    <li><a href="admin.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li class="dropdown-parent">
                        <a href="javascript:void(0)"><i class="fas fa-info-circle"></i> About Us <i class="fas fa-caret-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="adminvision.html"><i class="fas fa-bullseye"></i> Mission & Vision</a></li>
                            <li><a href="adminhistory.html"><i class="fas fa-landmark"></i> History</a></li>
                        </ul>
                    </li>
                    <li class="dropdown-parent">
                        <a href="javascript:void(0)"><i class="fas fa-info-circle"></i> Tracks <i class="fas fa-caret-down"></i></a>
                        <ul class="dropdown-menu">
                            <li><a href="admintvl.html"><i class="fas fa-bullseye"></i> TVL Tracks</a></li>
                            <li><a href="adminacademic.html"><i class="fas fa-landmark"></i> Academic Tracks</a></li>
                        </ul>
                    </li>
                    <li><a href="adminContact.html"><i class="fas fa-graduation-cap"></i> Contact</a></li>
                    <li><a href="AdminLandingPage.html"><i class="fas fa-user-graduate"></i> Events</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <div class="main-content">
            <div class="decorative-corner"></div>
            
            <div class="contact-section">
                <h1>Contact Us</h1>
                <p style="font-size: 1.1em; line-height: 1.8; margin-bottom: 20px;" id="welcome-message">...</p>
                <div class="office-info">
                    <h3><i class="far fa-clock"></i> Office Opening Hours</h3>
                    <p style="font-size: 1.1em;" id="office-hours">...</p>
                </div>
            </div>
            
            <div class="contact-section">
                <h2>Administrative Offices</h2>
                <div id="offices-container">
                    </div>
                <button class="btn-add" onclick="openOfficeModal()"><i class="fas fa-plus"></i> Add New Office</button>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-container">
            <div class="academic-programs">
                <h2>Our Academic Programs</h2>
                <div class="programs-grid" id="programs-container">
                    </div>
                <button class="btn-add" onclick="openProgramModal()"><i class="fas fa-plus"></i> Add New Program</button>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Zamboanga Sibugay National High School. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <div id="editor-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Edit Item</h3>
                <button class="btn-cancel" onclick="closeModal()" style="padding: 5px 10px;">X</button>
            </div>
            <div id="modal-body">
                </div>
            <div class="modal-footer">
                <button class="btn-cancel" onclick="closeModal()">Cancel</button>
                <button class="btn-save" onclick="saveData()"><span id="save-btn-text">Save Changes</span></button>
            </div>
        </div>
    </div>

    <script>
        // ========================
        // CONFIGURATION
        // ========================
        const firebaseConfig = {
           apiKey: "AIzaSyDlClfbOSKAhalafAQ4ptMRCHkaG-DxDd8", // PUT YOUR API KEY BACK HERE
           authDomain: "zsnhs-24e44.firebaseapp.com",
           databaseURL: "https://zsnhs-24e44-default-rtdb.firebaseio.com",
           projectId: "zsnhs-24e44",
           storageBucket: "zsnhs-24e44.firebasestorage.app",
           messagingSenderId: "39166648924",
           appId: "1:39166648924:web:d65f2e83e6143a5aff7c99"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        
        // Global State
        let globalData = {};
        let editingType = null;
        let editingIndex = null;

        // ========================
        // APP INITIALIZATION
        // ========================
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
            setupMobileMenu(); // New function for mobile menu
        });

        // 1. Mobile Menu Logic
        function setupMobileMenu() {
            const toggleBtn = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            const dropdownParents = document.querySelectorAll('.dropdown-parent > a');

            // Toggle hamburger menu
            toggleBtn.addEventListener('click', function() {
                navLinks.classList.toggle('active');
                // Change icon
                const icon = this.querySelector('i');
                if(navLinks.classList.contains('active')) {
                    icon.classList.remove('fa-bars');
                    icon.classList.add('fa-times');
                } else {
                    icon.classList.remove('fa-times');
                    icon.classList.add('fa-bars');
                }
            });

            // Toggle dropdowns on click for mobile
            dropdownParents.forEach(link => {
                link.addEventListener('click', function(e) {
                    // Only prevent default if we are on a small screen
                    if (window.innerWidth <= 767) {
                        e.preventDefault();
                        const parent = this.parentElement;
                        parent.classList.toggle('dropdown-active');
                    }
                });
            });
        }

        async function initializeApp() {
            await loadAllData();
        }

        async function loadAllData() {
            try {
                const doc = await db.collection('contacts').doc('schoolData').get();
                if (doc.exists) {
                    globalData = doc.data();
                    renderUI();
                } else {
                    alert("No database found. Please run the setup script first.");
                }
            } catch (error) {
                console.error("Error loading:", error);
                alert("Error connecting to database.");
            }
        }

        function renderUI() {
            renderSchoolInfo();
            renderOffices();
            renderPrograms();
        }

        function renderSchoolInfo() {
            const info = globalData.schoolInfo || {};
            document.getElementById('school-address').textContent = info.address || '';
            document.getElementById('school-phone').textContent = info.phone || '';
            document.getElementById('school-email').textContent = info.email || '';
            document.getElementById('school-name').textContent = info.name || '';
            document.getElementById('office-hours').textContent = info.officeHours || '';
            document.getElementById('welcome-message').textContent = info.welcomeMessage || '';
        }

        function renderOffices() {
            const container = document.getElementById('offices-container');
            const offices = globalData.offices || [];
            
            let html = '';
            offices.sort((a,b) => a.order - b.order).forEach((office, index) => {
                html += `
                    <div class="office">
                        <div class="admin-actions">
                            <button class="btn-edit" onclick="openOfficeModal(${index})"><i class="fas fa-pen"></i></button>
                            <button class="btn-delete" onclick="deleteItem('offices', ${index})"><i class="fas fa-trash"></i></button>
                        </div>
                        <h3><i class="${office.icon || 'fas fa-building'}"></i> ${office.name}</h3>
                        ${office.phone ? `<div class="contact-method"><i class="fas fa-phone"></i> Phone: ${office.phone}</div>` : ''}
                        ${office.email ? `<div class="contact-method"><i class="fas fa-envelope"></i> Email: ${office.email}</div>` : ''}
                        ${office.address ? `<div class="contact-method"><i class="fas fa-map-marker-alt"></i> Address: ${office.address}</div>` : ''}
                        ${office.description ? `<div class="contact-method"><i class="fas fa-info-circle"></i> ${office.description}</div>` : ''}
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        function renderPrograms() {
            const container = document.getElementById('programs-container');
            const programs = globalData.academicPrograms || [];
            
            let html = '';
            programs.sort((a,b) => a.order - b.order).forEach((prog, index) => {
                html += `
                    <div class="program-card">
                         <div class="admin-actions">
                            <button class="btn-edit" onclick="openProgramModal(${index})"><i class="fas fa-pen"></i></button>
                            <button class="btn-delete" onclick="deleteItem('academicPrograms', ${index})"><i class="fas fa-trash"></i></button>
                        </div>
                        <h3>${prog.name}</h3>
                        <p>${prog.description}</p>
                    </div>
                `;
            });
            container.innerHTML = html;
        }

        // ========================
        // MODAL & FORM LOGIC
        // ========================

        function openOfficeModal(index = null) {
            editingType = 'offices';
            editingIndex = index;
            document.getElementById('modal-title').innerText = index === null ? "Add New Office" : "Edit Office";
            
            const office = index !== null ? globalData.offices[index] : {};
            
            const formHtml = `
                <div class="form-group"><label>Office Name</label><input type="text" id="inp-name" value="${office.name || ''}"></div>
                <div class="form-group"><label>Phone</label><input type="text" id="inp-phone" value="${office.phone || ''}"></div>
                <div class="form-group"><label>Email</label><input type="text" id="inp-email" value="${office.email || ''}"></div>
                <div class="form-group"><label>Address (Optional)</label><input type="text" id="inp-address" value="${office.address || ''}"></div>
            `;
            
            document.getElementById('modal-body').innerHTML = formHtml;
            document.getElementById('editor-modal').style.display = 'flex';
        }

        function openProgramModal(index = null) {
            editingType = 'academicPrograms';
            editingIndex = index;
            document.getElementById('modal-title').innerText = index === null ? "Add New Program" : "Edit Program";
            
            const prog = index !== null ? globalData.academicPrograms[index] : {};
            
            const formHtml = `
                <div class="form-group"><label>Program Name</label><input type="text" id="inp-name" value="${prog.name || ''}"></div>
                <div class="form-group"><label>Description</label><textarea id="inp-desc">${prog.description || ''}</textarea></div>
            `;
            
            document.getElementById('modal-body').innerHTML = formHtml;
            document.getElementById('editor-modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('editor-modal').style.display = 'none';
        }

        // ========================
        // CRUD OPERATIONS
        // ========================

        async function saveData() {
            const btn = document.getElementById('save-btn-text');
            const originalText = btn.innerText;
            btn.innerText = "Saving...";
            
            try {
                if (editingType === 'offices') {
                    const existing = editingIndex !== null ? globalData.offices[editingIndex] : {};
                    
                    const newOffice = {
                        name: document.getElementById('inp-name').value,
                        phone: document.getElementById('inp-phone').value,
                        email: document.getElementById('inp-email').value,
                        address: document.getElementById('inp-address').value,
                        description: existing.description || '',
                        icon: existing.icon || 'fas fa-building',
                        order: existing.order || 99
                    };
                    
                    if (editingIndex !== null) {
                        globalData.offices[editingIndex] = newOffice; // Edit
                    } else {
                        if(!globalData.offices) globalData.offices = [];
                        globalData.offices.push(newOffice); // Add
                    }
                }
                else if (editingType === 'academicPrograms') {
                    const existing = editingIndex !== null ? globalData.academicPrograms[editingIndex] : {};
                    
                    const newProg = {
                        name: document.getElementById('inp-name').value,
                        description: document.getElementById('inp-desc').value,
                        order: existing.order || 99
                    };
                    
                    if (editingIndex !== null) {
                        globalData.academicPrograms[editingIndex] = newProg; // Edit
                    } else {
                        if(!globalData.academicPrograms) globalData.academicPrograms = [];
                        globalData.academicPrograms.push(newProg); // Add
                    }
                }

                await db.collection('contacts').doc('schoolData').set(globalData);
                renderUI();
                closeModal();
                alert("Saved successfully!");

            } catch (error) {
                console.error("Save error:", error);
                alert("Failed to save changes: " + error.message);
            } finally {
                btn.innerText = originalText;
            }
        }

        async function deleteItem(type, index) {
            if(!confirm("Are you sure you want to delete this item? This cannot be undone.")) return;
            try {
                globalData[type].splice(index, 1);
                await db.collection('contacts').doc('schoolData').set(globalData);
                renderUI();
            } catch (error) {
                console.error("Delete error:", error);
                alert("Failed to delete.");
            }
        }
    </script>
</body>
</html>