<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class Schedules - ZSNHS</title>
    
    <link rel="stylesheet" href="admin-css/teacher.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
</head>
<body>

    <div class="dashboard">
        <div class="sidebar" id="sidebar">
            <div class="logo">
                <div class="logo-placeholder">ZSNHS</div>
                <h1>ZSNHS</h1>
            </div>

            <div class="nav-menu">
                <h2>Dashboard</h2>
                <div class="nav-item" onclick="window.location.href='admin.html'">
                    <i class="fas fa-tachometer-alt"></i> <span>Overview</span>
                </div>
                
                <div class="nav-item dropdown-open" onclick="toggleDropdown('academics-dropdown', this)">
                    <div style="display:flex; align-items:center;">
                        <i class="fas fa-graduation-cap"></i> 
                        <span>Academics</span>
                    </div>
                    <i class="fas fa-chevron-down chevron-icon"></i>
                </div>
                <div class="nav-dropdown show" id="academics-dropdown">
                    <a href="teacher.html" class="nav-sub-item">Teacher Management</a>
                    <a href="subjects.html" class="nav-sub-item">Subjects</a>
                    <a href="sections.html" class="nav-sub-item">Grade Level & Sections</a>
                    <a href="schedules.html" class="nav-sub-item active">Class Schedules</a>
                </div>

                <div class="nav-item" onclick="window.location.href='guidance.html'">
                    <i class="fas fa-hands-helping"></i> <span>Guidance</span>
                </div>
                <div class="nav-item" onclick="window.location.href='parent.html'">
                    <i class="fas fa-users"></i> <span>Parents</span>
                </div>
                <div class="nav-item" onclick="window.location.href='reports.html'">
                    <i class="fas fa-chart-pie"></i> <span>Reports</span>
                </div>
                <div class="nav-item" onclick="window.location.href='settings.html'">
                    <i class="fas fa-cog"></i> <span>Settings</span>
                </div>
            </div>
        </div>

        <div class="main-content">
            <div class="header">
                <h1>Class Schedules</h1>
                <div class="user-profile">
                    <div class="avatar-placeholder">A</div>
                    <span>Admin</span>
                </div>
            </div>

            <div class="content-section">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 10px;">
                    <h2 style="color: var(--primary-color);">Master Schedule</h2>
                    
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <select id="filter-grade" onchange="filterSchedules()" style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; cursor: pointer; background: #fff;">
                            <option value="All">All Levels</option>
                            <option value="Grade 7">Grade 7</option>
                            <option value="Grade 8">Grade 8</option>
                            <option value="Grade 9">Grade 9</option>
                            <option value="Grade 10">Grade 10</option>
                            <option value="Grade 11">Grade 11</option>
                            <option value="Grade 12">Grade 12</option>
                        </select>

                        <input type="text" id="search-input" onkeyup="filterSchedules()" placeholder="Search Teacher, Subject, or Section..." style="padding: 10px; border: 1px solid #ddd; border-radius: 5px; width: 250px;">
                        
                        <button class="btn btn-primary" onclick="openScheduleModal()"><i class="fas fa-plus"></i> Add Schedule</button>
                    </div>
                </div>

                <table class="teachers-table">
                    <thead>
                        <tr>
                            <th>Section</th>
                            <th>Subject</th>
                            <th>Teacher</th>
                            <th>Day & Time</th>
                            <th style="text-align: right;">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="schedules-list-body">
                        <tr><td colspan="5" class="loading-cell">Loading schedules...</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="schedule-modal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="modal-title">Add Class Schedule</h2>
          <span class="close-modal" onclick="closeModal('schedule-modal')">&times;</span>
        </div>
        <div class="modal-body">
          <form id="schedule-form" onsubmit="event.preventDefault(); saveSchedule();">
            <input type="hidden" id="edit-doc-id">
            
            <div class="form-group">
              <label>Grade & Section</label>
              <select id="sel-section" class="form-control" required>
                  <option value="">Loading Sections...</option>
              </select>
            </div>

            <div class="form-group">
              <label>Subject</label>
              <select id="sel-subject" class="form-control" required>
                  <option value="">Loading Subjects...</option>
              </select>
            </div>

            <div class="form-group">
              <label>Teacher</label>
              <select id="sel-teacher" class="form-control" required>
                  <option value="">Loading Teachers...</option>
              </select>
            </div>

            <div class="form-group">
                <label>Day(s)</label>
                <input type="text" class="form-control" value="Daily (Mon-Fri)" readonly 
                       style="background-color: #e9ecef; color: #495057; cursor: not-allowed;">
            </div>

            <div class="form-group" style="display:flex; gap:15px;">
                <div style="flex:1">
                    <label>Start Time <small style="color:#666; font-weight:normal;">(AM/PM)</small></label>
                    <input type="time" id="sched-start" class="form-control" required>
                </div>
                <div style="flex:1">
                    <label>End Time <small style="color:#666; font-weight:normal;">(AM/PM)</small></label>
                    <input type="time" id="sched-end" class="form-control" required>
                </div>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button class="btn" onclick="closeModal('schedule-modal')">Cancel</button>
          <button class="btn btn-primary" onclick="saveSchedule()">Save Schedule</button>
        </div>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="admin-js/admin-config.js"></script>
    <script>
        function toggleDropdown(id, el) {
            document.getElementById(id).classList.toggle('show');
            el.classList.toggle('dropdown-open');
        }
    </script>
    <script src="admin-js/schedules.js"></script>

</body>
</html>